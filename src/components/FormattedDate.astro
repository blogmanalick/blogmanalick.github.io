---
import { DEFAULT_LANG, LANG_EN, LANG_ES, LANG_PT, LOCALE } from '../lib/lang';

interface Props {
	date: Date;
	locale?: string;
}

const DEFAULT_LOCALE = LOCALE[DEFAULT_LANG];
const { date, locale = DEFAULT_LOCALE } = Astro.props;

const localeFormats: Record<string, Intl.DateTimeFormatOptions> = {
	[DEFAULT_LOCALE]: {
		year: 'numeric',
		month: 'long',
		day: 'numeric',
	},
	[LANG_PT]: {
		year: 'numeric',
		month: 'long',
		day: 'numeric',
	},
	[LANG_EN]: {
		year: 'numeric',
		month: 'short',
		day: 'numeric',
	},
	[LANG_ES]: {
		year: 'numeric',
		month: 'long',
		day: 'numeric',
	},
};

const format = localeFormats[locale] || localeFormats[DEFAULT_LOCALE];
---

<time datetime={date.toISOString()}>
	{date.toLocaleDateString(locale, format)}
</time>
